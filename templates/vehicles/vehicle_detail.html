{% extends "base.html" %}
{% block title %}{{ vehicle.display_name }} - FleetPredict Pro{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ vehicle.display_name }}</h2>
    <div>
        <a href="{% url 'vehicles:vehicle_list' %}" class="btn btn-outline-secondary">Back to list</a>
        {% if can_manage %}
        <a href="{% url 'vehicles:vehicle_update' vehicle.pk %}" class="btn btn-primary ms-2">Edit</a>
        <a href="{% url 'vehicles:vehicle_history' vehicle.pk %}" class="btn btn-outline-primary ms-2">Maintenance History</a>
        <a href="{% url 'vehicles:vehicle_delete' vehicle.pk %}" class="btn btn-outline-danger ms-2">Delete</a>
        {% endif %}
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header">Vehicle Information</div>
            <div class="card-body">
                <dl class="row mb-0">
                    <dt class="col-sm-4">License Plate</dt>
                    <dd class="col-sm-8">{{ vehicle.license_plate }}</dd>
                    <dt class="col-sm-4">VIN</dt>
                    <dd class="col-sm-8">{{ vehicle.vin }}</dd>
                    <dt class="col-sm-4">Make / Model</dt>
                    <dd class="col-sm-8">{{ vehicle.make }} {{ vehicle.model }}</dd>
                    <dt class="col-sm-4">Year</dt>
                    <dd class="col-sm-8">{{ vehicle.year }}</dd>
                    <dt class="col-sm-4">Color</dt>
                    <dd class="col-sm-8">{{ vehicle.color|default:"-" }}</dd>
                    <dt class="col-sm-4">Type</dt>
                    <dd class="col-sm-8">{{ vehicle.vehicle_type|default:"-" }}</dd>
                    <dt class="col-sm-4">Status</dt>
                    <dd class="col-sm-8"><span class="badge bg-{% if vehicle.status == 'active' %}success{% elif vehicle.status == 'under_maintenance' %}warning{% elif vehicle.status == 'retired' %}secondary{% else %}secondary{% endif %}">{{ vehicle.get_status_display }}</span></dd>
                    <dt class="col-sm-4">Current Mileage</dt>
                    <dd class="col-sm-8">{{ vehicle.current_mileage|default:"-" }} km</dd>
                    <dt class="col-sm-4">Fuel Type</dt>
                    <dd class="col-sm-8">{{ vehicle.fuel_type|default:"-" }}</dd>
                    <dt class="col-sm-4">Assigned Driver</dt>
                    <dd class="col-sm-8">{% if vehicle.assigned_driver %}{{ vehicle.assigned_driver.get_full_name }}{% else %}-{% endif %}</dd>
                    {% if vehicle.notes %}
                    <dt class="col-sm-4">Notes</dt>
                    <dd class="col-sm-8">{{ vehicle.notes }}</dd>
                    {% endif %}
                </dl>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card mb-3">
            <div class="card-header">Maintenance</div>
            <div class="card-body">
                <p><strong>Total maintenance tasks:</strong> {{ vehicle.maintenance_tasks.count }}</p>
                <p><strong>Last maintenance:</strong> {{ vehicle.get_last_maintenance_date|default:"Never" }}</p>
                <a href="{% url 'vehicles:vehicle_history' vehicle.pk %}" class="btn btn-outline-primary">View History</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
